namespace = mem_satellite_cloud

@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000

# Failure1
ship_event = {
	id = mem_satellite_cloud.201
	title = mem_satellite_cloud.201.name
	desc = mem_satellite_cloud.201.desc
	picture = GFX_evt_ship_in_orbit
	location = FROM

	is_triggered_only = yes

	option = {
		name = mem_satellite_cloud.dissapointing
	}
}
# Failure2
ship_event = {
	id = mem_satellite_cloud.202
	title = mem_satellite_cloud.202.name
	desc = mem_satellite_cloud.202.desc
	picture = GFX_evt_ship_in_orbit
	location = FROM

	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
	}
}

# Critical Fail 1 (Ship Destroyed)
ship_event = {
	id = mem_satellite_cloud.301
	title = mem_satellite_cloud.301.name
	desc = mem_satellite_cloud.301.desc
	picture = GFX_evt_debris
	show_sound = event_ship_explosion
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		kill_leader = { type = scientist show_notification = no }
		fleet = { destroy_fleet = this }
	}
			
	option = {
		name = UNFORTUNATE
	}
}

# Critical Fail 2 (Corvette Spam)
ship_event = {
	id = mem_satellite_cloud.302
	title = mem_satellite_cloud.302.name
	desc = mem_satellite_cloud.302.desc
	picture = GFX_evt_unknown_ships
	show_sound = event_red_alert
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		create_country = {
			#TODO Change names
			name = mem_satellite_cloud.fleetname
			type = faction
		}
		last_created_country = {
			establish_communications_no_message = root.owner
			create_fleet = {
				name = "Ancient Solar Drones"
				effect = {
					set_owner = PREV
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v4.2c"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Combat Mining Drone"
					}
					create_ship = {
						name = "The Game"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					create_ship = {
						name = "Solar Drone v2.0b"
						design = "Advanced Combat Mining Drone"
					}
					set_location = from
				}
			}
			set_faction_hostility = { set_hostile = yes }
		}
		hidden_effect = { 
			last_created_fleet = { 
				fleet_event = {
					id = roam_system.1

				}
			}
		}
	}
	option = {
		name = mem_satellite_cloud.retreat
	}
}

#Fleet roams around system
fleet_event = {
	id = roam_system.1
	hide_window = yes
	is_triggered_only = yes

	immediate = { 
		clear_fleet_actions = this

		queue_actions = {
			repeat = {
				solar_system = {
					random_system_planet = {
						set_planet_flag = rand_planet.1
					}
				}
				find_random_planet = {
					trigger = {
						has_planet_flag = rand_planet.1
					}
					found_planet = {
						move_to = this
						orbit_planet = this
						remove_planet_flag = rand_planet.1
					}
				}
			}
		}
	 }
}

# Art Installation
ship_event = {
	id = mem_satellite_cloud.1
	title = mem_satellite_cloud.1.name
	desc = mem_satellite_cloud.1.desc
	picture = GFX_evt_ship_in_orbit
	location = FROM

	is_triggered_only = yes

	option = {
		name = FASCINATING
		owner = {
			add_influence = 300
		}
	}
}

# Solarium
ship_event = {
	id = mem_satellite_cloud.2
	title = mem_satellite_cloud.2.name
	desc = mem_satellite_cloud.2.desc
	picture = GFX_evt_physics_research
	location = FROM

	is_triggered_only = yes

	option = {
		name = FASCINATING
		from = {
			hidden_effect { orbital_deposit_tile = { clear_deposits = yes }}
			orbital_deposit_tile = {
				add_deposit = d_vast_physics_deposit
				add_deposit = d_vast_engineering_deposit
			}
		}
	}
}

# Cloud Computing 
ship_event = {
	id = mem_satellite_cloud.3
	title = mem_satellite_cloud.3.name
	desc = mem_satellite_cloud.3.desc
	picture = GFX_evt_physics_research
	location = FROM

	is_triggered_only = yes

	option = {
		name = INTERESTING
		trigger = {
			owner = {
				not = {
					has_technology = tech_administrative_ai
				}
			}
		}
		owner = {
			add_research_option = tech_administrative_ai
			add_tech_progress = {
				tech = tech_administrative_ai
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				and = {
					has_technology = tech_administrative_ai
					not = {
						has_technology = tech_self_aware_logic
					}
				}
			}
		}
		owner = {
			add_research_option = tech_self_aware_logic
			add_tech_progress = {
				tech = tech_self_aware_logic
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				and = {
					has_technology = tech_administrative_ai
					has_technology = tech_self_aware_logic
					not = {
						has_technology = tech_sentient_ai
					}
				}
			}
		}
		owner = {
			add_research_option = tech_sentient_ai
			add_tech_progress = {
				tech = tech_sentient_ai
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				and = {
					has_technology = tech_administrative_ai
					has_technology = tech_self_aware_logic
					has_technology = tech_sentient_ai
				}
			}
		}
		owner = {
			add_physics_research = 500
		}
	}
}

# Observatory 
ship_event = {
	id = mem_satellite_cloud.4
	title = mem_satellite_cloud.4.name
	desc = mem_satellite_cloud.4.desc
	picture = GFX_evt_physics_research
	location = FROM

	is_triggered_only = yes

	option = {
		name = INTERESTING
		trigger = {
			owner = {
				not = {
					has_technology = tech_orbital_sensor_array
				}
			}
		}
		owner = {
			add_research_option = tech_orbital_sensor_array
			add_tech_progress = {
				tech = tech_orbital_sensor_array
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				has_technology = tech_orbital_sensor_array
			}
		}
		owner = {
			add_physics_research = 500
		}
	}
}

# Scrap metal
ship_event = {
	id = mem_satellite_cloud.5
	title = mem_satellite_cloud.5.name
	desc = mem_satellite_cloud.5.desc
	picture = GFX_evt_physics_research
	location = FROM

	is_triggered_only = yes

	option = {
		name = mem_satellite_cloud.useful
		FROM = {
			hidden_effect { orbital_deposit_tile = { clear_deposits = yes }}
			orbital_deposit_tile = {
				add_deposit = d_enormous1_mineral_deposit
			}
		}
	}
}

# Stellar converter
ship_event = {
	id = mem_satellite_cloud.6
	title = mem_satellite_cloud.6.name
	desc = mem_satellite_cloud.6.desc
	picture = GFX_evt_physics_research
	location = FROM

	is_triggered_only = yes

	option = {
		name = INTERESTING
		trigger = {
			owner = {
				not = {
					has_technology = tech_solar_panel_network
				}
			}
		}
		owner = {
			add_research_option = tech_solar_panel_network
			add_tech_progress = {
				tech = tech_solar_panel_network
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				and = {
					has_technology = tech_solar_panel_network
					not = {
						has_technology = tech_power_hub_1
					}
				}
			}
		}
		owner = {
			add_research_option = tech_power_hub_1
			add_tech_progress = {
				tech = tech_power_hub_1
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				and = {
					has_technology = tech_solar_panel_network
					has_technology = tech_power_hub_1
					not = {
						has_technology = tech_power_hub_2
					}
				}
			}
		}
		owner = {
			add_research_option = tech_power_hub_2
			add_tech_progress = {
				tech = tech_power_hub_2
				progress = 0.10
			}
		}
	}
	option = {
		name = INTERESTING
		trigger = {
			owner = {
				and = {
					has_technology = tech_solar_panel_network
					has_technology = tech_power_hub_1
					has_technology = tech_power_hub_2
				}
			}
		}
		owner = {
			add_physics_research = 500
		}
	}
}

# Stellar scoop
ship_event = {
	id = mem_satellite_cloud.7
	title = mem_satellite_cloud.7.name
	desc = mem_satellite_cloud.7.desc
	picture = GFX_evt_star_white
	location = FROM

	is_triggered_only = yes

	option = {
		name = mem_satellite_cloud.useful
		FROM = {
			hidden_effect { orbital_deposit_tile = { clear_deposits = yes }}
			orbital_deposit_tile = {
				add_deposit = d_vast_energy_deposit
				add_deposit = d_vast_energy_deposit
			}
		}
	}
}

# Pyrovore Colony
ship_event = {
	id = mem_satellite_cloud.8
	title = mem_satellite_cloud.8.name
	desc = mem_satellite_cloud.8.desc
	picture = GFX_evt_debris
	location = FROM

	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		FROM = {
			hidden_effect { orbital_deposit_tile = { clear_deposits = yes }}
			orbital_deposit_tile = {
				add_deposit = d_enormous1_society_deposit
			}
		}
	}
}